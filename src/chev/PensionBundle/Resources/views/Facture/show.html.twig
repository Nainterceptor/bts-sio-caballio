{% extends 'chevPensionBundle:Facture:layout.html.twig' %}
{% block title %}Voir - {{ parent() }}{% endblock %}
{% block breadcrumbs %}
{{ parent() }}
<li>
	<a href="{{ path('facture_show', {id: entity.id}) }}">Aperçu</a>
</li>
{% endblock %}
{% block body %}
<div class="row-fluid">
	<div class="span6">
		<h2>Voir la facture</h2>
		<table class="table table-hover">
		    <tbody>
		        <tr>
		            <th>Id</th>
		            <td>{{ entity.id }}</td>
		        </tr>
		        <tr>
		            <th>Client</th>
		            <td>{{ entity.utilisateur }}</td>
		        </tr>
		        <tr>
		            <th>Box</th>
		            <td>{{ entity.box }}</td>
		        </tr>
		        <tr>
		            <th>Cheval</th>
		            <td>{{ entity.box.cheval }}</td>
		        </tr>
		        <tr>
		            <th>Prix Total</th>
		            <td>{{ montant }}</td>
		        </tr>
		        <tr>
		        	<th>Durée du bail</th>
		        	<td>{{ nbJours}}</td>
		        </tr>
		        <tr>
		            <th>Date de debut</th>
		            <td>{{ entity.dateDebut|date('Y-m-d H:i:s') }}</td>
		        </tr>
		        <tr>
		            <th>Date de fin</th>
		            <td>{{ entity.dateFin|date('Y-m-d H:i:s') }}</td>
		        </tr>
		        <tr>
		            <th>Date de facturation</th>
		            <td>{{ entity.dateFacture|date('Y-m-d H:i:s') }}</td>
		        </tr>
		    </tbody>
		</table>
	</div>
	<div class="span6">
		<h2>Liste des paiements</h2>
		<table class="table table-sprited">
		    <thead>
		    	<tr>
		    		<th>Montant</th>
		    		<th>Type de paiement</th>
		    		<th>Dates</th>
		    	</tr>
		    </thead>
		    <tbody>
		    	{% for paiement in paiements %}
		    	<tr>
		            <td>{{ paiement.montant }} €</td>
		            <td>{{ paiement.typePaiement }}</td>
		            <td>
		            	<p>Date Paiement : <br>
		            		{{ paiement.datePaiement|date('d/m/Y H:i:s') }}</p>
		            	<p>Date Encaissement : <br>
		            		{{ paiement.dateEncaissement|date('d/m/Y H:i:s') }}</p>
		            </td>
		        </tr>
		        {% else %}
		    	<tr>
		    		<td colspan="4">Aucun paiement effectué</td>
		    	</tr>
		    	{% endfor %}
		    </tbody>
		</table>
	</div>
</div>
<div class="row-fluid">
	<div class="span6">
		{% if is_granted('ROLE_GERANT') %}
		<form onsubmit="return confirm('{{ 'user.delete.confirm'|trans([], 'backoffice') }}')" action="{{ path('facture_delete', { 'id': entity.id }) }}" method="post">
        	{{ form_widget(delete_form) }}
        	<button type="submit" class="btn btn-danger">Supprimer</button>
    	</form>
    	{% endif %}
	</div>
	<div class="span6 pagination-right">
		<a href="{{ path('facture') }}" class="btn">Retour à la liste</a>
		{% if is_granted('ROLE_GERANT') %}
		<a href="{{ path('facture_edit', { 'id': entity.id }) }}" class="btn btn-primary">Editer</a>
	    {% endif %}
	</div>
</div>
{% endblock %}